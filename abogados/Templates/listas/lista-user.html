{% extends 'base.html' %} {% load static %} {% block content %}
<section class="relative bg-slate-700 w-full py-8 px-4">
  <div class="flex flex-col w-full items-center content-center">
    <h1 class="text-3xl font-semibold text-white mb-6">Lista de usuarios</h1>
    <div class="w-full overflow-x-auto bg-white rounded-lg shadow-lg">
      <table class="w-full text-left table-auto">
        <thead class="bg-slate-800 text-white">
          <tr>
            <th class="px-4 py-2 font-medium">Nombre</th>
            <th class="px-4 py-2 font-medium">Correo</th>
            <th class="px-4 py-2 font-medium">Dirección</th>
            <th class="px-4 py-2 font-medium">Teléfono</th>
            <th class="px-4 py-2 font-medium">Opciones</th>
          </tr>
        </thead>
        <tbody class="bg-gray-600">
          {% for u in usuarios %}
          <tr class="border-t border-gray-300">
            <td class="px-4 py-3">{{ u.nombre }}</td>
            <td class="px-4 py-3">{{ u.correo }}</td>
            <td class="px-4 py-3">{{ u.direccion }}</td>
            <td class="px-4 py-3">{{ u.telefono }}</td>
            <td class="px-4 py-3 flex space-x-2">
              <a
                class="bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-500 transition-all"
                href="edicion/{{ u.documento }}"
                >Editar</a
              >
              <a
                class="bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-500 transition-all"
                href="/lista-usuarios/eliminar/{{ u.correo }}"
                >Eliminar</a
              >
              <a
                class="bg-sky-600 text-white py-2 px-4 rounded-md hover:bg-sky-500 transition-all"
                href="Ver/{{ u.documento }}"
                >Visualizar</a
              >
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</section>

<section class="relative bg-slate-700 w-full py-8 p-4">
  <div class="flex flex-col w-full items-center content-center">
    <h1 class="text-2xl font-bold text-white mb-8">
      Selecciona a un Abogado y Envia tu Mensaje
    </h1>

    <button
      id="showLawyersBtn"
      class="bg-indigo-600 text-white py-2 px-6 rounded-lg hover:bg-indigo-700 transition-all mb-8"
    >
      Elegir Abogado
    </button>

    <div id="lawyerTableContainer" class="hidden w-full overflow-x-auto">
      <table
        class="w-full table-auto bg-slate-600 shadow-lg rounded-lg overflow-hidden"
      >
        <thead class="bg-slate-800 text-white">
          <tr>
            <th class="px-4 py-2 font-medium">Nombre</th>
            <th class="px-4 py-2 font-medium">Correo</th>
            <th class="px-4 py-2 font-medium">Teléfono</th>
            <th class="px-4 py-2 font-medium">Seleccionar</th>
          </tr>
        </thead>
        <tbody class="bg-gray-600 text-white">
          {% for a in abogados %}
          <tr class="hover:bg-slate-500">
            <td class="px-4 py-2">{{ a.nombre }}</td>
            <td class="px-4 py-2">{{ a.correo }}</td>
            <td class="px-4 py-2">{{ a.telefono }}</td>
            <td class="px-4 py-2 text-center">
              <form
                action="/seleccionar-abogado/{{ a.documento }}"
                method="POST"
              >
                <button
                  type="submit"
                  class="bg-indigo-600 text-white py-1 px-3 rounded-lg hover:bg-indigo-700 transition-all"
                >
                  Seleccionar
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div
      id="messageForm"
      class="hidden w-full max-w-lg mt-8 bg-slate-600 p-6 rounded-lg shadow-lg"
    >
      <h2 class="text-xl font-semibold text-white mb-4">Detalles de tu Caso</h2>
      <textarea
        id="caseMessage"
        class="w-full p-4 bg-slate-500 text-white rounded-lg mb-4"
        rows="6"
        placeholder="Escribe los detalles de tu caso aquí..."
      ></textarea>
      <button
        id="sendMessageBtn"
        class="bg-green-600 text-white py-2 px-6 rounded-lg hover:bg-green-700 transition-all w-full"
      >
        Enviar Mensaje
      </button>
    </div>
  </div>
</section>

<script>
  document
    .getElementById("showLawyersBtn")
    .addEventListener("click", function () {
      document
        .getElementById("lawyerTableContainer")
        .classList.remove("hidden");

      document.getElementById("messageForm").classList.remove("hidden");
    });

  document
    .getElementById("sendMessageBtn")
    .addEventListener("click", function () {
      const message = document.getElementById("caseMessage").value;

      if (message.trim() === "") {
        alert("Por favor, ingresa los detalles de tu caso.");
      } else {
        alert("Mensaje enviado: " + message);

        document.getElementById("caseMessage").value = "";
      }
    });
</script>

{% endblock %}
